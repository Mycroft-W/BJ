# Linux 基础

## 命令行基础

### Linux命令提示符

[root@localhost /]#

[登录用户@主机名缩写 当前所在目录]用户身份提示符

＃代表超级管理员（root）

$ 代表普通用户

### 路径

绝对路径：从/目录开始写的目录结构（完整路径）

相对路径：从当前路径或上级路径开始写起的目录结构

### 文件管理命令

#### 显示目录

~~~shell
ls # 显示指定目录内的文件列表（默认当前目录）
	-a # 显示所有文件（包括特殊目录和隐藏文件）
	-l # 以长列表形式显示，ls -l 别名为 ll
	-h # 使用合适单位显示文件大小
	-d # 显示目录本身信息，常以-ld形式出现
	-i # 显示文件索引节点号（inode），每个文件的inode独一无二
~~~

文件存储时，会有两部分数据

1.  属性相关数据：inode（文件权限、类型、归属（2）、时间（3））、文件的唯一标识号

2.  文件内容数据：data block

    **元数据：文件权限、类型、归属（2）、时间（3）**

目录保存了文件的文件名

注：文件的 inode 在文件进行修改后会变更

长格式信息解释：

| 列数 | 信息                                           |
| ---- | ---------------------------------------------- |
| 1    | 类型和文件权限                                 |
| 2    | 引用计数；目录文件表示子目录数量               |
| 3    | 文件属主                                       |
| 4    | 文件属组                                       |
| 5    | 文件大小（对于设备文件显示的是设备类型和序号） |
| 6    | 最后一次修改时间                               |
| 7    | 文件名                                         |

文件类型和权限，共10位长度

第一位，文件类型

| 标志 | 文件类型                                                     |
| ---- | ------------------------------------------------------------ |
| -    | 普通文件（文本、压缩包、配置文件...）使用`file` 命令查看更具体的类型 |
| d    | 目录文件                                                     |
| b    | 块设备文件（存储类设备）                                     |
| c    | 字符设备文件（传输数据的设备）                               |
| l    | 软连接文件-快捷方式                                          |
| s    | 套接字文件                                                   |
| p    | 管道文件                                                     |

第一列结尾的`.` SELinux标记

#### 切换目录

~~~shell
cd # 切换到指定目录（默认家目录）
# 超级管理员(root)家目录:/root
# 普通管理员(user)家目录：/home/user
# 例子
cd /root/abc/ # 切换到/root下的abc目录
~~~

| 特殊目录 | 作用             |
| -------- | ---------------- |
| ~        | 当前用户的家目录 |
| -        | 之前所在目录     |
| .        | 当前目录         |
| ..       | 上级目录         |

~~~shell
pwd # 显示当前所在路径
~~~

#### 创建目录

~~~shell
mkdir # 创建目录
# 选项
	-p # 递归创建
# 例子
mkdir /root/abc/e/f # 递归创建/root 下的abc目录和其中的e目录和其中的f目录
~~~

#### 删除

~~~shell
rm # 删除指定文件 CentOS中 rm 是 rm -i 的别名
# 选项
	-i # 删除前询问
	-f # 不询问，强制删除
	-r # 递归删除
# 例子
rm a # 删除当前目录文件a
rm -rf /root/abc/ # 强制删除/root下的abc文件夹

rmdir # 删除空目录
~~~

~~~shell
alias # 查看已经生效的别名
~~~

#### 创建文件

~~~shell
touch # 改变已有文件的状态，创建新文件
# 格式
touch 文件名 # 文件存在则改变属性，不存在则创建一个空文件
# 批量创建
touch {a..z}.txt # 批量创建a.txt、b.txt。。。z.txt
touch a{0..9}

mkdir abc{1..9}
~~~

#### 重定向

~~~shell
> # 覆盖式重定向写入（会覆盖掉目标文件的内容，一定要确定文件对象）
>> # 追加式重定向写入

echo "hello world." # 在终端输出字符
echo "hello world." >> a.txt # 将hello world. 写入文件a.txt
~~~

#### 查看文件内容

~~~shell
cat # 查看文件内容，逐页显示到尾页
# 格式
cat 文件名
# 结合重定向可以合并文件内容
cat a.txt b.txt > c.txt # 将a.txt和b.txt 的内容合并写入c.txt（按照文件顺序写入）


more # 分页显示文件内容
# 格式
more 文件
# 交互命令
	空格 # 向下翻页
	b # 向上翻页
	回车 # 向下翻行
	q # 退出


less # 增强功能的分页显示，支持PgDn和PgUp的翻页
# 格式
less 文件名
# 交互命令
	空格 # 向下翻页
	b # 向上翻页
	回车 # 向下翻行
	/keyword # 查询指定关键词，并高亮显示
	n # 快速定位下一个关键词
	q # 退出
	
	
head # 显示文件头部内容
# 格式
head 文件名
# 选项
	-n #指定显示行数
# 例子
head -n 3 a # 显示文件a的前三行
head -3 a # 同上


tail # 显示文件尾部内容
# 格式
tail 文件名
# 选项
	-n # 显示指定行数
	-f # 实时显示尾部（监控尾部变化），与命令 tailf 效果相同
# 例子
tail -n 3 a # 显示文件a的尾部三行
tail -3 a # 同上
tail -f a # 实时显示文件a的尾部内容，同 tailf a
~~~

#### 文件、目录操作

~~~shell
# 复制粘贴
cp # 复制文件
# 格式
cp 源文件 目标位置 # 复制文件到指定位置
cp 源文件 目标位置/新文件名 # 复制文件到指定位置并修改文件名
# 选项
	-r # 递归复制
	-p # 保留源文件所有权限和归属等属性信息
	-d # 当复制符号连接时，把目标文件或目录也建立为符号链接，并指向与源文件或目录连接的原始文件或目录
	-a # 相当于-dpr 的集合
# 例子
cp /root/a /tmp # 将/root 下的文件a复制到/tmp下
cp /root/a /root/b # 将/root 下的文件a复制为新文件b
cp -a /root/a /tmp # 复制/root下的文件a到/tmp下并保留属性、递归目录、链接


# 剪切粘贴
mv # 剪切文件
# 格式
mv 源文件 目标位置 # 将文件移动到目标位置
mv 源文件 目标位置/新文件名 # 将文件移动到目标位置并改名
mv 源文件 新文件名 # 将文件改名
# 选项
	-b # 移动时若目标位置有同名文件存在，则将同名文件备份（备份文件名结尾有~标识）
# 例子
mv /root/a /tmp/b # 将/root下文件a移动到/tmp下并改名为b
~~~

**TIPS：**

>   rm和cp命令都有-r选项：操作目录
>
>   rm和cp命令都有-i选项：提示是否继续执行
>
>   rm和mv命令都有-f选项：强制执行

### 链接

~~~shell
ln # 创建链接（默认为硬链接）
	-s # 创建软连接（符号链接）
# 格式
ln 选项 源文件 目标文件
# 例子
ln -s /root/lol /tmp/ # 在/tmp目录下创建/root目录下的lol文件的软连接
# 创建链接时，要使用绝对路径
~~~

在ls -l的长列表中，对于软链接，标注了指向的源文件；第二列则显示了引用计数

第五列，对于普通文件显示的是文件大小，对于设备类文件，显示的是主从设备号

主：代表设备类型

从：同类型中，第几个设备

>   引用计数：
>
>   普通文件：硬链接数量和源文件的和
>
>   目录文件：代表当前目录内一级子目录的数量

~~~shell
# 拓展
ls -lsh # 显示了一个文件实际占用的磁盘空间大小（data block的独占性）
~~~

#### 软链接（符号链接）

*   源文件和软连接各自拥有不同的Inode号和Block块
*   软连接是一个指向源文件的文件，在进行修改时实际修改的是源文件
*   删除源文件，软链接失效；删除软链接，源文件无影响
*   软链接文件大小不受源文件变化影响，仅仅记录源文件的位置信息
*   软连接文件权限为：rwxrwxrwx，但最终生效的权限以源文件为准
*   软连接既可以链接文件，也可以链接目录，并且可以跨分区创建

#### 硬链接

*   源文件和硬链接文件拥有相同的Inode号和Block块（实际为同一个文件）
*   两个文件不管修改哪一个均可同步（实际修改的是同一真实数据）
*   无论删除哪一个，都互不影响
*   **不能对目录创建硬链接，并且不能跨分区创建**

## 文件管理

### 文件查询

~~~shell
which # 查询命令的绝对路径，同时会显示别名
# 格式
which 命令

whereis # 定位命令的二进制文件程序、源码文件和帮助手册页面等资源位置
	-b # 显示绝对路径
	-m # 显示帮助手册路径（即man帮助手册文档位置）
	-s # 显示命令的源码文件路径（使用源码安装的命令才有）
# 格式
whereis 命令
~~~

### 查询方式

数据库方式查询：

​	在已经建好的数据库内查询（不一定准确——有可能没有更新）

遍历式查询：

​	对所有目录，所有文件都查看比对是否符合查询条件（结果100%准确）

~~~shell
locate # 查询文件位置（数据库方式）
	-i # 忽略查询对象大小写
updatedb # 更新数据库（根据规则文件更新）
/var/lib/mlocate/mlocate.db # 数据库文件位置
/etc/updatedb.conf # 更新规则文件（记录要忽略的资源：文件类型、目录）
# 格式
locate 关键词

find # 查找文件（遍历方式）
# 格式
find 位置 条件
# find查询条件
# 按照文件名
find /etc -name "*.txt" # 在/etc下查找以.txt结尾的文件，-name 选项后的关键词需要使用双引号
	通配符：
		*：代表任意长度的任意字符（包括空）
		？：代表一个任意字符（长度为1）
		[]：每个中括号只能代表一个字符，字符范围取决于括号内指定的范围

# 按照文件大小
find /etc -size +5M # 在/etc下查找大于5M的文件
find /etc -size -5M # 查找小于5M的文件
find /etc -size +4M -a -size -5M # 查找同时满足大于4M的和小于5M条件的文件
# -a 要求两个条件同时生效（and）

# 按照归属
find / -user username # 查询属主是指定用户的文件
find / -group groupname # 查询属组是指定组的文件

find / -nouser #查询没有属主的文件
find / -nogroup # 查询没有属组的文件
# 用于查找删除了属主或属组的文件

# 按照权限
find / -perm 777 # 查找权限为777的文件

# 按照文件类型
find / -type [f d l] # f：普通文件；d：目录文件；l：链接文件

find / -perm 777 -a -type f # 查找出系统内权限过高的普通文件

# find的条件
# 根据inode号
	-inum inode # 如果同一个inode号查出多个文件，多个文件之间是硬链接关系

# 根据时间查询
	访问时间（-atime/天，-amin/分钟）：用户最近一次访问时间
	修改时间（-mtime/天，-mmin/分钟）：文件最后一次内容修改时间
	变化时间（-ctime/天，-cmin/分钟）：文件数据元（权限等）的最后一次修改时间
# 例子
find /etc -atime +5 # 查找五天前被访问过的文件
find /etc +atime -5 # 查找五天内被访问过的文件

# -o 或者，两个条件之间满足一个即可

# 拓展
wc -l filename # 统计文本行数

find结合命令连接符
方法一： -exec 或 -ok（在过程中会闻讯是否执行后面的命令）
	find 位置 条件 -exec 命令2 -选项 {} \;
	{} 保存了find命令的结果
	\ 当命令前有反斜杠时，执行的是命令本意，而不会执行别名（取消了命令的别名）
	； 命令结束的符号
# 例子
find /tmp -size +10M -exec rm -r {} \; # 查询/tmp下大于10M的文件，然后删除

方法二：（独立的命令链接方式 |xargs）（不支持带空格的文件）
	find 位置 条件 |xargs 命令2
	# find查询到符合条件的文件后，依次一个一个的传递到|xargs命令后的命令2上
# 例子
find /tmp -size +5M |xargs rm # 查找/tmp下大于5M的文件，然后删除

拓展：
	管道符 |：
		将前一个命令执行的结果，作为后一个命令的参数（整体传递）
	|xargs：
		将前一个命令执行的结果，作为后一个命令的参数（逐个传递）
	
# 例子
ls -l /etc | more
# 分页显示/etc目录下所有文件的长格式
ls -l /etc |xargs more
# 分页显示/etc目录下，每一个文件的内容（一个一个的依次显示）

# 文件内容查询命令
grep # 文本内容查询
	-i # 查询时，忽略大小写
	-n # 查询结果显示行号
	-v # 查询时，反向查询
	--color=auto # 符合条件对象高亮显示
方法1：
	grep "keyword" filename
	# 列出指定文件中包含关键词的行（关键词高亮）
方法2：
	命令|grep "keyword"
	ls -l /etc | grep "rwx" # 查询/etc下有rwx权限的文件
	netstat -antp | grep ":80" # 查看是否开放了80端口
~~~

### find、locate、grep对比

*   find和locate都是查询系统中文件位置的，grep是查询文本内容中含关键词的行
*   find通过遍历查询，结果精确但消耗大量系统资源和时间
*   locate是通过创建数据库保存文件位置，再查询数据库的一种快速索引方式，节省资源但精确度差
*   find默认情况下是精确匹配，可以使用通配符进行模糊匹配
*   grep默认情况下是包含匹配，要想精确匹配需要使用正则表达式

### 压缩和归档

压缩目的：

1.  减小文件大小（减少占用空间、加快传输速度）
2.  文件汇总
3.  文件备份

~~~shell
zip # Windows和Linux通用的压缩方式 
# 格式
zip 包名（生成的） 压缩对象 # 压缩（包名后缀为.zip）
	-r # 压缩目录时，递归压缩
unzip 包名 # 解压缩（默认当前目录）
	-d # 指定解压缩目录
unzip 包名 -d 目录

# Linux常见压缩格式
.gz .bz2 # 只能压缩文件，不能压缩目录，不能归档

gzip filename # 压缩文件，不保留源文件
	-d # 解压
gunzip 包名 # 解压（后缀.gz）

bzip2 filename # 压缩文件，不保留源文件
	-d # 解压
bunzip2 包名 # 解压（后缀.bz2）

# 归档压缩
.tar .tar.gz .tar.bz2 .tar.xz .tgz

tar # 归档（不压缩）
# 格式
tar -cvf *.tar file1 file2 # 将文件1和文件2归档，包名后缀.tar
	-c # 打包
	-v # 显示打包过程
	-f # 指定打包包名
# 例子
tar -cvf dll.tar * # 将当前目录下的所有文件归档，包名为dll.tar
gzip dll.tar --> dll.tar.gz # 将归档后的包压缩

# 归档同时压缩
tar -zcvf 包名 files --> *.tar.gz # 归档后使用gzip压缩
	-z # 调用gzip进行压缩
tar -jcvf 包名 files --> *.tar.bz2 # 归档后使用bzip2压缩
	-j # 调用bzip2进行压缩
tar -Jcvf 包名 files --> *.tar.xz # 归档后使用xz压缩
	-J # 调用xz压缩
# 解压缩（适用格式 .tar .tar.gz .tar.bz2 .tar.xz .tgz)
tar -xvf 包名 # 默认解压到当前目录
	-C # 解压到指定位置
#例子
tar -xvf dll.tgz -C /home # 将dll.tgz解压到/home目录
~~~

## 设备管理

### 挂载

常见的存储设备：

*   /dev/sda* 硬盘分区
*   /dev/cdrom 光盘（旧）
*   /dev/sr* 光盘（新）

~~~shell
mount # 查询系统中已挂载的设备，也用来挂载设备
	-t # 指定挂载的文件系统类型（ext3、ext4、iso9660等）
	-o # 指定挂载的额外选项（特殊属性：读写权限，同步异步等）
# 格式
mount [-t 文件系统类型] [-o 特殊选项] 设备文件名 挂载点
# 挂载设备
# U盘或移动硬盘都会被识别为/dev/sd*
# 挂载点一定要是空的目录

umount # 卸载
# 卸载时，不能在挂载目录内（设备正忙）
# 卸载时既可以指定为挂载点，也可以指定为设备
~~~

#### 特殊属性

1.  rw/ro

    ~~~shell
    mount -t FS -o rw 设备 挂载点 # 将分区挂载为可读写
    mount -t FS -o ro 设备 挂载点 # 降分区挂载为只读
    -o remount # 重新挂载（针对已挂载设备）
    mount -t FS -o remount，rw 设备或挂载点 # 将分区重新挂载为只读
    mount -t FS -o remount，ro 设备或挂载点 # 将分区重新挂载为只读
    
    df -h # 查看分区和挂载点关系的命令，查看分区使用情况
    	-h # 以合适的单位显示分区挂载信息
    fdisk -l # 查看所有可识别磁盘类存储设备（硬盘、移动硬盘、U盘）
    ~~~

2.  exec/noexec

    exec 指的是能在当前分区内能执行可执行文件

    noexec 指的是即使文件有x权限，也不能执行

    在指定的分区下保存的文件无法执行

### 挂载NTFS设备的方法

*   重新编译内核

*   加载NTFS模块

*   使用第三方插件加载NTFS

#### 实验：利用NTFS-3g插件实现Linux挂载NTFS文件系统的U盘

1.  将U盘连接到Windows宿主机，然后通过VMware切换到Linux中

2.  使用fdisk -l命令确认U盘的设备名称

3.  安装ntfs-3g插件

4.  创建挂载点

5.  挂载

    ~~~shell
    mount -t ntfs-3g /dev/sd?? /mnt/usb
    ~~~


## 网络管理

### 红帽系列网络管理命令

| 版本       | 命令  |
| ---------- | ----- |
| CentOS 6.x | setup |
| CentOS 7.x | nmtui |

~~~shell
ifconfig # 查看网卡相关信息（需要安装net—tools软件）

# loopback（本地回环网卡）
# 作为本机数据通讯的一环（只在本机生效）
# IP：127.0.0.1

# 临时修改网卡的网络参数（两种写法），重启网卡或服务即恢复原来配置文件中的内容
ifconifg ens33（网卡名） 192.168.88.121/24
ifconfig ens33 192.168.88.121 netmask 255.255.255.0

ip # 1.查看ip等网络资源信息；2.临时配置ip等网络参数;3.查看网关
ip address show # 查看网络信息
ip a # 同上

ip address add 192.168.88.121/24 dev ens33 # 临时给网卡ens33 添加了一条IP

ip route show # 显示网关
~~~

ifconfig和ip a 都能查看活动的网卡信息，也都能临时设置网卡参数，但是重启就失效

只有修改配置文件才能生效（/etc/sysconfig/network-scripts/ifcfg-ens33)

#### 重启网络

~~~shell
systemctl restart network # 重启网络服务（所有网卡都会跟随重启）

# 只重启一个网卡
ifdown ens33 # 关闭网卡
ifup ens33 # 启动网卡
ifdown ens33;ifup ens33 # 重启指定网卡，";"命令分隔，顺序执行命令

ping # 测试网络是否正常
	-c # 指定ping的次数
	-s # 指定探测时使用的数据包大小（最大65507）
~~~

### 显示Linux中的网络进程

1.  已经建立了的连接
2.  等待别人连接的进程

~~~shell
netstat # 查看网络连接状态
	-a # 列出所有网络状态
	-n # 以数字形式显示IP和端口
	-t # 显示TCP协议进程
	-u # 显示UDP协议进程
	-p # 显示进程号和进程名
	-l # 显示状态
# 组合1：-antp ，显示tcp协议相关连接进程
# 组合2：-tlunp ，显示udp协议相关连接进程
# 与grep组合过滤信息
netstat -antp | grep ":80"

ss # 相当于netstat升级版本
~~~

### 通信命令

~~~shell
write 用户# 向指定的在线用户发送信息

wall # 向所有在线用户发送信息
ctrl+d # 使用组合键才能发送信息

mail 用户# 给指定用户发送邮件信息，以及接收邮件
ctrl+d # 发送邮件
~~~

### ifconfig命令临时修改IP地址实验

1.  实验前提：

    检查并关闭NetworkManager

    `systemctl stop NetworkManager`

2.  重启network服务

    `systemctl restart network`

3.  临时修改IP地址

    `ifconfig ens33 192.168.88.222/24`

~~~shell
systemctl status # 查看指定软件的运行状态
~~~

## 用户管理

Linux是基于用户身份对系统资源进行管理的操作系统

### 用户和组

用户账号:UID(User Identity,用户标识号)

| 用户类型 | CentOS-6 UID | CentOS-7 UID |
| -------- | ------------ | ------------ |
| 超级用户 | 0            | 0            |
| 系统用户 | 1-499        | 1-999        |
| 普通用户 | 500-65535    | 1000-65535   |

组账号:GID(Group Identify,组标识号)

初始组(私有组),创建用户时加入的组

附加组(公共组),有初始组的用户额外加入的组

### 用户和组相关文件

#### 用户信息文件 /etc/passwd

| 列数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| 1    | 用户名                                                       |
| 2    | 密码占位符                                                   |
| 3    | 用户ID(UID)                                                  |
| 4    | 组ID(GID)                                                    |
| 5    | 用户描述信息                                                 |
| 6    | 用户家目录(root: /root ; 普通用户: /home/username)           |
| 7    | 登录shell类型(/bin/bash 能登录系统; /sbin/nologin 不能登录系统) |

#### 用户密码文件 /etc/shadow

| 列数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| 1    | 用户名                                                       |
| 2    | 加密后的密码(系统用户的密码都是 !! 或 \* 表示无密码不能登录) |
| 3    | 密码最近更改时间(时间戳形式)                                 |
| 4    | 密码最短有效时间                                             |
| 5    | 密码最长有效期                                               |
| 6    | 密码到期前的警告天数                                         |
| 7    | 密码过期后宽限天数                                           |
| 8    | 密码失效时间(时间戳形式)                                     |
| 9    | 保留                                                         |

时间戳转日期:

```shell
date -d "1970-01-01 19527 days"
```

日期转时间戳:

```shell
echo $($(date -date="2020/02/01" +%s)/86400+1)
```

#### 组信息文件 /etc/group

| 列数 | 描述         |
| ---- | ------------ |
| 1    | 组名         |
| 2    | 组密码占位符 |
| 3    | 组ID(GID)    |
| 4    | 组成员列表   |

#### 组密码文件 /etc/gshadow

| 列数 | 描述                                   |
| ---- | -------------------------------------- |
| 1    | 用户组                                 |
| 2    | 组密码,可以为空或!,表示没有密码        |
| 3    | 组管理员,可以为空;多个管理员用逗号分隔 |
| 4    | 组成员,用逗号分隔                      |

#### 用户家目录

root: /root

普通用户: /home/username

#### 用户邮箱目录 /var/spool/mail

例如: zhangsan 的邮件所在位置: /var/spool/mail/zhangsan

#### 用户模板目录 /ect/skel

新建用户时会将模板目录下的文件复制到新用户的家目录中(并同时修改权限)

### 用户和组相关命令

#### 添加用户

~~~shell
useradd [选项] 用户名
	-u UID # 用指定UID创建用户
	-g 组名 # 指定初始组
	-d 目录 # 指定家目录
	-s shell类型 # 指定shell类型(/sbin/nologin 不允许登录)
	-r # 创建系统用户,一般和-s 同时使用
~~~

useradd 命令再创建用户时会参考两个配置文件:

*   /etc/default/useradd
*   /etc/login.defs

1.  /etc/default/useradd

| 字段                 | 描述                                      |
| -------------------- | ----------------------------------------- |
| GROUP=100            | 创建新用户时默认初始组的GID(公有组机制)   |
| HOME=/home           | 新用户默认家目录位置                      |
| INACTIVE=-1          | 密码过期后宽限天数;-1 代表密码永不失效    |
| EXPIRE=              | 密码失效时间(时间戳),为空表示密码永不失效 |
| SHELL=/bin/bash      | 创建用户时默认shell类型                   |
| SKEL=/etc/skel       | 模板目录                                  |
| CREAT_MAIL_SPOOL=yes | 是否创建邮箱                              |

2.  /etc/login.defs

| 字段                     | 描述                           |
| ------------------------ | ------------------------------ |
| MAIL_DIR /var/spool/mail | 新用户默认邮箱位置             |
| PASS_MAX_DAYS 99999      | 密码有效期                     |
| PASS_MIN_DAYS 0          | 密码修改间隔时间               |
| PASS_MIN_LEN 5           | 密码最小长度(PAM取代,字段失效) |
| PASS_WARN_AGE 7          | 密码修改到期前警告天数         |
| UID_MIN 1000             | 普通用户起始 UID               |
| UID_MAX 60000            | 普通用户最大 UID               |
| GID_MIN 1000             | 组起始 GID                     |
| GID_MAX 60000            | 组最大 GID                     |
| CREAT_HOME yes           | 是否创建家目录                 |
| UMASK 077                | 权限掩码                       |
| ENCRYPT_METHOD SHA512    | 用户密码加密模式               |

#### 设置和修改密码

```shell
passwd [选项] 用户名 # 第一次使用是为指定用户创建密码,以后是修改密码
	-l # 锁定用户的密码,使之无法登录
	-u # 解锁用户密码
	-S # 查看用户账号状态(是否被锁定)
echo "123123" | passwd --stdin username # 非交互式修改密码
```

root 执行 passwd:

1.  可以给任何用户修改密码
2.  修改时无需提供原密码

普通用户执行 passwd:

1.  默认只能给自己修改密码(命令后不需写用户名)
2.  需要提供原密码
3.  要遵循密码各项原则(复杂度/长度)

#### 用户信息修改(必须是存在用户)

```shell
usermod [选型] 用户名
	-u UID # 修改用户 UID
	-g 组名 # 修改初始组
	-d 目录 # 和 -m 同时使用,对原家目录改名
# 例子
usermod -m -d /home/user4home user4 # 将user4的家目录从 /home/user4 改为 /home/user4home
	-s shell类型 # 修改用户登录 shell 类型
	-L # 锁定用户密码
	-U # 解锁用户密码
	-l 新用户名 旧用户名 # 修改用户名
```

#### 删除用户

```shell
userdel [选项] 用户名
	-r # 删除时,同时删除家目录
```

#### 添加和删除组

```shell
groupadd 组名 # 添加组
groupdel 组名 # 删除组(尽量是空组)
```

#### 向组内添加成员

```shell
gpasswd [选项] 用户名 组名
	-a # 向指定组添加成员
	-d # 从组内删除成员
	-M # 定义组内成员列表,用逗号分隔(覆盖式)
```

#### 其他相关命令

```shell
id 用户名 # 显示用户的UID/初始组/附加组列表
su 用户名 # 切换用户身份
su - 用户名 # 切换身份同时切换环境
newgrp 组名 # 修改用户的有效组(暂时性,使用 exit 命令退回)
```

#### 有效组

有效组,决定了用户创建文件时,文件的属组

默认有效组是用户的初始组,当用户创建文件时,文件的属组是有效组

## Linux 权限

在 Linux 中,有几种常用的用于限制用户和保护文件的权限设置:

*   基础权限
*   特殊权限
*   拓展 ACL 权限
*   文件系统属性
*   sudo 授权
*   SELinux

### 基础权限

在ls -l命令中展示第一列是文件类型和权限的表示位

第一位是文件类型，后面每三位一组对应三组权限：文件所有者权限、文件所属组权限、文件其他人权限

![](../Operations Engineer/权限位.png)

#### 权限类型

*   文本类文件

    *   r：内容查看权限（cat more less head tail）
    *   w：内容编写权限（echo vi vim）
    *   x：执行权限（设置执行权限的一般都是脚本或程序）

    Linux中普通文件不管是新创建还是新上传的都不允许有x权限，保证系统安全性

*   目录类文件

    *   r：查看目录下文件列表权限（ls）
    *   w：目录内文件创建删除权限（文件改名）
    *   x：进入目录权限（cd）

若指定位置有字母代表拥有该权限，若没有权限则使用-代替，例如：

rw-r--r--（代表所有者有读写权限，所属组和其他人有读权限）

#### 权限修改

~~~shell
chmod # 修改权限
	-R # 递归修改（针对目录使用）
# 格式
chmod 选项 权限类型 目标文件
# 所有者：u -- user
# 所属组：g -- group
# 其他人：o -- other
# 所有人：a -- all
# 读：r
# 写：w
# 执行：x
# 用数字表示权限位
# r：4
# w：2
# x：1
# 例子
chmod o+r file # 为其他人添加读权限
chmod u-w file # 为所有者删去写权限
chmod +x file # 为所有人添加执行权限，相当于a+x
chmod 644 file # 所有者权限为读写，所属组为读，其他为读
~~~

添加用户：useradd username

设置密码：passwd username

**要删除一个文件，不需要看文件本身的权限，需要查看文件所在目录是否有w权限，如有，则可删除该目录下的所有文件（root创建的也能删除）**

#### 归属修改

~~~shell
chown # 修改归属
	-R # 递归修改（修改时同时修改目录中的所有子文件）
# 格式
chown owner filename # 修改文件属主
chown :group filename # 修改文件属组
chown owner:group filename # 同时修改属主和属组
# ":"是分隔符，可用"."代替

chgrp # 修改属组
~~~

#### 权限掩码

~~~shell
umask # 查看或修改文件的权限掩码（以八进制形式显示）
# 格式
umask 0022 # 临时修改掩码，退出终端失效
~~~

root用户的umask是：0022

普通用户的umask一般是（有例外）：0002

文件默认权限计算方式（对位相减）

**最大权限**减去**掩码值**等于当前用户创建文件的**默认权限**

最大权限 - umask值 = 默认权限

### 特殊权限

#### SetUID 权限

设置用户ID（SUID）：当文件被用户使用时，程序会以文件属主的权限运行

会在属主权限位置显示 s

*   只有可执行的文件才能设定SUID权限
*   执行者要有执行权限
*   文件在执行过程中以文件属主的权限运行
*   SUID 权限只在文件运行过程中有效

#### SetGID 权限

设置组ID（SGID）：对文件来说，程序会以文件属组的权限运行，对目录来说，目录中创建的新文件会以目录的属组作为默认属组

会在属组权限位置显示 s

1.  对于文件
    *   只有可执行的文件才能设定 SUID 权限
    *   执行者要有执行权限
    *   文件在执行时以文件的属组权限运行
    *   SGID权限只在文件运行过程中有效
2.  对于目录
    *   用户必须有读取和执行权限
    *   用户在此目录中创建新文件时,会将目录的属组作为文件的默认属组

#### Sticky Bit

粘着位：进程结束后文件还驻留（粘着）在内存中

会在其他人权限位置显示 t

*   只对目录有效
*   在目录中,只能删除属主为自己的文件(高于 目录的w 权限)

#### 设置方法

```shell
chmod [u g o] [+ -] s filename/dirname
# 八进制表示
SUID:4
SGID:2
SBIT:1
chmod 4755 filename # 将文件的权限设为八进制的 4755
```

### ACL 权限

#### 特殊的权限需求

在基础权限范围(属主/属组/其他)之外,需要给某个或某些人设置一些权限

#### ACL 权限的定义

ACL(Access Control Lists) 访问控制列表,能够为单一的用户或者组设置基础权限范围外的权限,以应对特殊需要

#### 开启 ACL 权限

ACL 需要文件系统的支持,目前大部分都支持,如:ext3/ext4/xfs等

检查指定分区是否支持 ACL 权限功能

CentOS 7

```shell
dmesg | grep ACL
# 结果中有类似 XFS with ACLs 即可
```

CentOS 6

```shell
dumpe2fs -h 分区设备 | grep acl
# 结果中有 Default mount options: user_xattr_acl 即可
```

拓展(只针对 CentOS 6):

假如 ACL 权限未开启,可以手动开启 ACL 权限

```shell
mount -o remount,acl / # 重新挂载 / 分区,并加入 ACL 权限
# 写入 /etc/fstab 文件,自动挂载
UUID=              /	xfs	defaults,acl	0 0
```

#### ACL 权限的使用

##### ACL 权限管理命令

1.  查看 ACL 权限

    ```shell
    getfacl 文件或目录
    ```

2.  设置 ACL 权限

    ```shell
    setfacl [选项] 文件或目录
    	-m # 为指定用户/组添加 ACL 权限
    	-x # 删除指定用户/组的 ACL 权限
    	-b # 清空指定文件上的所有 ACL 权限
    	-R # 对目录设置 ACL 权限时,递归到所有已存在的子文件
    	-d # 对目录设置默认 ACL 权限,不对目录生效,仅对目录下新建的子文件生效
    	-k # 清除指定目录的默认 ACL 权限
    # 在具有默认 ACL 权限的目录下创建新的目录时,新目录不仅继承 ACL 权限,还会继承默认权限
    # 例子
    setfacl -m u:u1:rwx a.txt # 为用户添加 ACL 权限
    setfacl -x u:u1 a.txt # 删除指定用户的 ACL 权限
    setfacl -b a.txt # 清空指定文件上的所有 ACL 权限
    setfacl -R -m u:u1:rwx aa/ # 对目录设置 ACL 权限,并递归设置
    setfacl -m d:u:u1:rwx aa/ # 对目录设置默认 ACL 权限
    setfacl -d -m u:u1:rwx aa/ # 同上
    setfacl -m m:rx aa/ # 设置最大有效权限 mask
    ```

ACL 权限会有 mask 约束,生效的权限是与 mask 相与获得

当文件设置了 ACL 权限后,权限中属组的位置被 ACL 的 mask 的权限替代

### 文件系统属性

文件系统的属性,只有 root 能设置,该权限优先级高于普通权限和ACL权限

#### 相关命令

```shell
chattr [+ -] [选项] 文件或目录 # 为文件或目录添加文件系统属性
# 选项
	i # 对文件,不允许删除/改名,不许添加或修改数据;对目录,在其中不许删除或创建文件
	a # 对文件,只许追加数据;对目录,只能新建文件,不许删除和改名
	e # Linux 中大多数文件默认有,表示该文件是使用 ext 文件系统进行存储的,并且不能使用 'chattr -e'取消

lsattr # 查看文件系统属性
	-a # 显示所有文件(包括隐藏)
	-d # 仅列出目录本身的属性
```

### sudo 授权

sudo 是 Linux 中用来进行命令授权的管理工具,通过授权的方式使某些用户可以执行只有管理员才能执行的命令,减少 root 身份的持有者,减少 root 登录次数,以此保证服务器的安全性

#### sudo 工作流程

超级管理员:

*   通过 visudo 命令或者编辑 /etc/sudoers 文件来对某用户授权

普通用户:

1.  使用 sudo 执行命令时,系统查询 /etc/sudoers 文件是否进行了授权
2.  如果已授权,则需要输入用户密码来确认身份(持续一小段时间,默认15分钟)
3.  密码正确,则借用 root 身份执行该命令,命令结束时授权也结束

#### sudo 相关命令和配置文件

`visudo` 编辑 /etc/sudoers 文件

/etc/sudoers 文件有固定语法,使用 visudo 命令编辑时退出会进行语法检查

授权语句格式:

```txt
root	ALL=(ALL)	ALL
```

字段含义:

*   root: 被授权用户,或组,组要在前面添加%(如: %wheel)
*   ALL: 来源主机地址
*   ALL: 被授权身份,默认是任意用户,ALL>root
*   ALL: 被授予命令,多条命令用逗号隔开(命令必须写绝对路径)

在设置授权时可以使用别名

别名设置:

```txt
# 用户别名
User_Alias SOMEUSERS=user1,user2,user3
# 命令别名
Cmnd_Alias SOMECMD=command1,command2,command3
```

使用

```txt
SOMEUSERS ALL=(root) SOMECOM # 授权对象是别名,命令也是(别名在使用前定义)
```

#### sudo 实例

##### 给 laow 授权使用 root 的所有权限

```txt
laow	ALL=(root)	ALL
```

##### 授权 zhangsan 可以重启服务器

```txt
zhangsan	ALL=(root) /sbin/shutdown -r now
```

##### 授权 www 可以管理 web 服务器

1.  可以重启 httpd

    ```shell
    service httpd restart
    ```

2.  可以修改 httpd 的配置文件

    ```shell
    vim /etc/httpd/conf/httpd.conf
    ```

3.  可以在 httpd 服务器的网页目录内创建和删除文件等

    ```shell
    setfacl -m u:www:rwx	/var/www/html
    ```

##### 授权 pdd 可以添加普通用户并修改密码

```shell
pdd	ALL=(root)	/sbin/useradd,/bin/passwd,!/bin/passwd root,!/bin passwd "",!/bin/passwd --stdin root
```

**注意: sudo 授权尽量遵循最小授权原则,具体到命令/选项/参数等等,否则会出现权限溢出**

## 软件管理

### 软件包分类

*   源码软件包(\*.tar.gz \*.tar.bz2)
*   二进制软件包(\*.rpm)
*   附带安装程序的软件包
*   绿色免安装版（少见）

#### 源码软件包

将软件的源代码打包形成，要使用需要进行编译安装

#### 二进制软件包

将编译好的软件打包发布，用户可以直接安装，省去了编译过程

不同的发行版本使用的打包机制不同

*   Debian系：.deb
*   Red Hat系：.rpm

#### 附带安装程序的软件包

含有安装程序的软件包，用户只需执行脚本，按照提示安装即可

#### 源码包和二进制包特征

| 类型         | 优点                                                         | 缺点                                           |
| ------------ | ------------------------------------------------------------ | ---------------------------------------------- |
| 源码软件包   | 可以修改源代码；可以选择所需功能；编译安装，更稳定、效率高；卸载方便 | 安装繁琐；编译时间长；安装报错，新手难以解决   |
| 二进制软件包 | 包管理系统简单；安装速度块                                   | 无法看到源代码，功能选择不如源码包灵活；依赖性 |

### 二进制安装包 rpm 管理命令

RPM(RedHat Package Manager)

#### rpm 包命名规范

格式：软件名-主版本-修订次数-使用系统-硬件平台.后缀（.rpm)

例如：tree-1.6.0-10-el7.x86_64.rpm

软件名：tree

主版本：1.6.0

修订次数：10

使用系统：el6代表RedHat 6；el7代表RedHat 7

硬件平台：适合那些CPU平台 i386 i686 x86 x86_64 amd 64 noarch(不区分平台)

后缀名称：.rpm

注意：

​	包全名：安装前一般使用全名操作管理（tree-1.6.0-10.e17.x86_64.rpm)

​	包名：安装后一般使用包名操作管理

#### rpm 包依赖关系

*   顺序依赖：a依赖b，b依赖c
*   树形依赖：c依赖a和b
*   树形依赖：b和c都依赖a

软件包的依赖对象有两种，第一种明确说明依赖哪一个软件，第二种依赖某个文件；对于第二种需要查询文件归属那个软件。

查询文件归属：[rpm依赖查询(http://www.rpmfind.net)](http://www.rpmfind.net)

#### 软件的默认安装路径

| 路径            | 内容             |
| --------------- | ---------------- |
| /etc/           | 配置文件保存位置 |
| /usr/bin/       | 软件命令保存位置 |
| /usr/lib/       | 函数文件保存位置 |
| /usr/share/doc/ | 使用手册保存位置 |
| /usr/share/man/ | 帮助文档保存位置 |

#### rpm 包管理命令

安装

~~~shell
rpm -ivh 软件包全名
	-i # 安装一个新的rpm包
	-v # 显示安装过程的详细信息
	-h # 以“#”显示安装的进度
	--test # 测试安装，不真正安装，检测依赖
	--force # 强制覆盖安装(可以用来复原文件)
~~~

##### 卸载

~~~shell
rpm -e 软件名 # 卸载软件
~~~

##### 升级

~~~shell
rpm -Uvh 软件包全名
	-U # 升级安装，如果没有，则直接安装
	-F # 升级安装，如果没有，则放弃安装
	--nodeps # 升级时不检测依赖关系
~~~

##### 查询已安装的软件信息

~~~shell
rpm -q[] 软件名
	-q # 查看指定软件是否安装
	-qa # 查看所有已安装软件
	-qi # 查看指定软件详细信息
	-ql # 查看指定软件安装的目录和文件列表
	-qR # 查看指定软件的依赖关系
~~~

##### 查询未安装的软件

~~~shell
rpm -qp[] 软件包全名
	-qpi # 查看指定未安装软件的详细信息
	-qpl # 查看指定未安装软件的默认安装位置
	-qpR # 查看指定未安装的依赖关系
~~~

##### 查询文件或者目录属于哪个软件包

~~~shell
rpm -qf 文件或者目录
~~~

### 二进制安装包 yum管理命令

yum 命令，能够自动解决依赖关系

#### yum 仓库（源）的分类

##### 本地 yum 源

将光盘或者镜像文件作为软件安装的仓库

##### 局域网 yum 源

使用一台主机作为 yum 源服务器，其他主机通过局域网连接

##### 互联网 yum 源

互联网中配置好的 yum 源，只需修改配置文件即可

#### 本地光盘 yum 仓库搭建

1.  将光盘挂载到指定的目录下

2.  修改本地 yum 源配置文件

    ~~~shell
    # 将以下内容修改
    baseurl=file:///media/CentOS/
    		file:///media/cdrom/
    		file:///media/cdrecorder/
    gpgcheck=1
    enabled=0
    # 修改为
    baseurl=file:///media # 此处填写光盘挂载目录
    gpgcheck=0 # 关闭安装时的软件校验功能（可不修改）
    enabled=1 # 启动本地 yum 源开关
    ~~~

3.  测试 yum 是否可用

    ~~~shell
    yum clean all # 清空原有的 yum 缓存数据
    yum makecache # 根据新的配置文件建立新的缓存数据
    ~~~

#### 互联网 yum 源配置

从指定的互联网 yum 源仓库下载配置文件替换原有文件即可

/etc/yum.repos.d/ 目录下文件:

*   CentOS-Base.repo # 互联网 yum 仓库配置文件
*   CentOS-Media.repo #  本地 yum 仓库配置文件(默认不开启)

下载命令：wget和curl

### yum 命令

#### yum 安装

~~~shell
yum install 软件名
yum groupinstall 软件组名
~~~

#### yum 卸载

~~~shell
yum remove 软件名
yum groupremove 软件组名
~~~

#### yum 升级

~~~shell
yum update 软件名
yum groupupdate 软件组名
yum upgrade # 更新所有有需要更新的软件
yum update # 更新所有需要更新的软件&内核更新（非主版本）
~~~

#### yum 软件包查询

~~~shell
yum list # 查询所有已安装和可安装的软件包
yum list 软件名 # 查询指定软件是否已安装
yum info 软件名 # 查询指定软件包的信息
yum grouplist 软件组名 # 查询所有已安装和可安装的软件组
yum groupinfo 软件组名 # 列出软件组中包含的软件
yum search <关键词> # 查询所有和关键词相关的包
~~~

#### yum 其他命令

~~~shell
yum clean all # 清除下载的临时软件包和缓存
yum makecache # 建立软件包缓存,提高查询速度
~~~

#### yum 安装软件组实验 安装桌面环境

通过 yum 为纯字符系统安装图形化桌面(CentOS 7)

~~~shell
yum -y groupinstall "X Window System"
yum -y groupinstall "GNOME Desktop"
yum -y groupinstall "Graphical Administration Tools"
startx # 启动图形界面
systemctl set-default runlevel5.target # 永久修改系统启动级别为桌面模式
~~~

### 二进制安装包-软件校验&软件恢复

#### 二进制软件包的校验

安装前:检测软件来源正常

安装后:配置文件发生了哪些变化

##### 软件安装前的校验(数字证书校验)

光盘文件在发布的时候集成了数字证书(公钥)

1.  安装数字证书

    ~~~shell
    # 挂载光盘
    mount /dev/sr0 /media/
    cd /media/
    # 安装证书
    rpm --import RPM-GPG-KEY-CentOS-7
    rpm -qa | grep gpg-pubkey
    ~~~

2.  开启数字证书校验 yum

    ~~~shell
    cd /etc/yum.repos.d/
    vim CentOS-Media.repo
    gpgcheck=1 # 开启校验
    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 # gpgkey位置
    ~~~

##### 软件安装后的校验

~~~shell
rpm -V 软件名 # 无修改,则无显示结果
~~~

校验结果分为三部分

1.  验证结果

    | 标志 | 信息                                |
    | ---- | ----------------------------------- |
    | s    | 文件大小改变                        |
    | M    | 权限改变                            |
    | 5    | 文件的MD5校验和改变(即文件内容改变) |
    | D    | 主从设备号改变                      |
    | L    | 文件路径改变                        |
    | U    | 文件属主改变                        |
    | G    | 文件属组改变                        |
    | T    | 文件的修改时间改变                  |

2.  文件类型

    | 标志 | 信息               |
    | ---- | ------------------ |
    | c    | 配置文件           |
    | d    | 普通文件           |
    | g    | "ghost"文件,很少见 |
    | l    | 授权文件           |
    | r    | 描述文件           |

3.  文件位置

#### 二进制软件包安装后的修复

##### 二进制软件包的结构

cpio命令主要是用来建立或者还原备份的工具

1.  cpio 的备份模式

    ~~~shell
    cpio -ovcB > [文件|设备]
    	-o # 进入 copy-out 模式(压缩)
    	-v # 显示过程
    	-c # 使用 portable format 存储方式
    	-B # 设定输入输出块为512bytes
    ~~~

2.  cpio 的还原模式

    ~~~shell
    cpio -idvcu < [cpio文件]
    	-i # 进入 copy-in 模式(解压)
    	-d # 恢复到指定位置(视压缩方式恢复)
    	-v # 显示过程
    	-c # 使用 portable format 存储方式
    	-u # 替换所有文件,无提示
    ~~~

在备份时使用绝对路径,还原时也会使用绝对路径;在备份时使用相对路径,还原时也会使用相对路径

##### 提取软件包文件修复

~~~shell
rpm2cpio 包全名 | cpio -idv ./命令绝对路径
~~~

##### 强制覆盖安装修复

~~~shell
rpm -ivh --force 软件包全名(只能修复丢失文件,安装时不会复原修改的文件)
~~~

### 源码软件包安装和相关操作

#### 软件环境

1.  检查yum仓库是否可以正常使用,以便于安装所需依赖
2.  检查编译工具链(gcc/gcc-c++/make)等命令是否安装
3.  软件所需的依赖文件

#### 软件包下载

最好从官网下载,不要随意从小的网站下载

#### 源码包安装流程

1.  解包,获得源码文件(阅读README-使用手册和INSTALL安装手册)

2.  `./configure` 检查依赖并设置安装配置;检查通过后会生成 Makefile 文件

    `--perfix=`指定安装目录;`--enable-`指定安装功能;`--with-`指定关联软件

3.  `make`编译,将源码编译成可执行的二进制文件(使用`-j`选项指定使用线程数)

4.  `make install` 安装,将编译出的二进制文件复制到系统,并配置环境

#### httpd 源码包安装

1.  从官网下载最新稳定版
2.  解包并进行`./configure`的检查;如果报错按照报错信息进行解决
3.  编译产生二进制文件
4.  安装二进制文件
5.  判断上一条命令是否执行成功

~~~shell
wget URL # 下载源码包
tar -xf PACKAGENAME # 解包
cd PACKAGEDIR # 进入软件目录
./configure --prefix=DIR # 检查并指定安装路径
# 在解决所有依赖和报错后
make # 编译
make install # 安装
echo $? # 判断上一条命令是否成功
~~~

6.  源码包安装的软件的删除

    直接删除安装目录即可(\-\-perfix,指定的目录)

源码安装 httpd 的相关路径

主目录: /usr/local/appache2

配置文件:/usr/local/appache2/conf

网页文件:/usr/local/appache2/htdocs

日志文件:/usr/local/appache2/logs

### 源码包安装和二进制安装管理的区别

源码安装和二进制安装可以同时存在,但服务不能同时启动,占用的是相同的端口,会产生冲突

#### 源码安装

源码包安装的软件不能使用统一的管理工具只能使用软件自身的管理命令

~~~shell
/usr/local/apache2/bin/apachectl start\stop\restart
~~~

#### 二进制安装

rpm 类的二进制包安装方式属于统一的管理机制,可以使用统一的管理工具

CentOS 7

~~~shell
systemctl start\stop\restart\status httpd
~~~

CentOS 6

~~~shell
service httpd start\stop\restart
~~~

### 附带安装程序的软件包安装 - webmin

1.  下载并解压后进入目录
2.  查看INSTALL或README文件
3.  运行安装脚本(setup.sh或者其他名字)
4.  按照提示信息进行安装

## 帮助

### 帮助命令

~~~shell
man # 通过帮助手册显示命令的使用方式
	-f # 显示该命令有哪几个级别的帮助
# 格式
man command
~~~

多种帮助级别的含义

| 帮助等级 | 含义                                               |
| -------- | -------------------------------------------------- |
| 1        | 查看命令的帮助信息                                 |
| 2        | 查看可以被内核调用的函数的帮助信息                 |
| 3        | 查看C语言相关函数的帮助信息                        |
| 4        | 查看设备和特殊文件的帮助信息（主要存在/dev目录下） |
| 5        | 配置文件的帮助信息                                 |
| 6        | 游戏的帮助信息（主要存在于个人版Linux）            |
| 7        | 查看其他杂项的帮助信息                             |
| 8        | 查看超级管理员能执行的命令的帮助                   |
| 9        | 内核信息的帮助文档                                 |

交互模式下的快捷键

| 快捷键 | 功能                                    |
| ------ | --------------------------------------- |
| 上箭头 | 查看上一行                              |
| 下箭头 | 查看下一行                              |
| PgUp   | 向上翻页                                |
| PgDn   | 向下翻页                                |
| g      | 回到首页                                |
| G      | 翻到尾页                                |
| q      | 退出交互模式                            |
| /      | 在交互模式下根据指定关键词进行搜索      |
| n      | 查询完成后，使用n快速定位到下一个关键词 |

~~~shell
help # 显示Linux内置命令相关帮助信息
	-m # 模拟man的格式显示帮助信息

#拓展
--help 选项
# 例子
ls --help
# Linux中大多数命令都是可以用--help作为选项显示帮助信息，只是显示的内容没有man和info全面

info # 查看指定命令的帮助信息
~~~

| 快捷键 | 功能                                         |
| ------ | -------------------------------------------- |
| 上箭头 | 查看上一行                                   |
| 下箭头 | 查看下一行                                   |
| PgUp   | 向上翻页                                     |
| PgDn   | 向下翻页                                     |
| Tab    | 快速切换到下一个以*开头的节点                |
| 回车   | 进入到当前以*开头的节点内，查看详细信息      |
| u      | 退出节点，回到帮助首页                       |
| n      | 当处于某一节点内时，可以直接切换到下一个节点 |
| p      | 当处于某一节点内时，可以直接切换到上一个节点 |
| ？     | 查看info所提供的的交互命令的帮助信息         |
| q      | 退出info模式                                 |