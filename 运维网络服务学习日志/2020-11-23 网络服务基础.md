# 网络服务基础

## 网络服务概述

网络服务:是指一些在网络上运行的,面向服务的软件模块;使用各种协议进行远程访问,为用户提供特定服务

### 常见网络服务

* 域名解析服务(DNS)
* 动态主机配置服务(DHCP)
* 文件传输服务(FTP/SAMBA)
* 网络文件系统服务(NFS)
* 万维网服务(APACHE/NGINX/TOMCAT)
* 邮件服务(MAIL)
* 数据备份服务(RSYNC)
* 数据库服务(MYSQL/REDIS)

## 基础知识

[网络地址(IP),物理地址(MAC),IP/TCP模型和协议,常见端口(/etc/services)](/运维基础学习日志/20-9-07TCPIP模型和网络通信原理.md)

### 常见网络配置

临时配置:使用命令进行调整,重启失效

固定配置:修改配置文件,持续生效

#### ip 地址配置

```shell
ifconfig # 网卡管理命令
# 实例
ifconfig eth0 192.168.12.250 netmask 255.255.255.0
ifconfig eth0 192.168.12.250/24
ifconfig eth0:0 102.168.12.251/24 # 设置永久的子接口(ifcfg-eth0:0)
```

网卡配置文件:**/etc/sysconfig/network-scripts/ifcfg-eth0**

```txt
DEVICE=eth0             # 设备名称
NAME=eth0               # 网卡名称
BOOTPROTO=static        # 连接方式(dhcp/static)
ONBOOT=yes              # 是否开机加载
IPADDR=192.168.12.250   # 子网掩码(PREFIX=24)
GATEWAY=192.168.12.1    # 网关
DNS1=8.8.8.8            # 首选DNS
DNS2=114.114.114.114    # 备用DNS
```

重启网络服务

```shell
service network restart
```

启动/关闭网卡

```shell
ifup 网卡名 # 启动网卡
ifdown 网卡名 # 关闭网卡
ifdown eth0;ifup eth0 # 重启 eth0 网卡
```

#### 主机名配置

临时生效

```shell
hostname 主机名
```

永久生效,修改配置文件 **/etc/sysconfig/network**

#### 网关配置

```shell
route # 查看系统中的路由表信息
# 添加和删除路由信息
route add default gw ip # 添加
route del default gw ip # 删除
```

永久修改,配置文件 **/etc/sysconfig/network-scripts/ifcfg-eth0**

#### DNS 配置

配置文件

局部 **/etc/sysconfig/network-scripts/ifcfg-eth0**

```txt
DNS=ip
```

全局 **/etc/resolv.conf**

```txt
nameserver ip
```

测试 DNS 命令

```shell
nslookup 域名
```

主机域名映射文件 **/etc/hosts**

用于保存主机名和 IP 地址的映射,但只是本机的映射;优先级高于 DNS 解析

### 网络常用命令

#### 网络信息查看

```shell
netstat # 查看系统的网络连接状态,路由信息,接口等
    -a # 显示所有活动连接
    -n # 以数字形式显示
    -t # 查看 TCP 协议相关
    -u # 查看 UDP 协议相关
    -p # 显示 PID 和进程名
    -l # 监听
```

#### 网络节点测试

```shell

```

## 补充

CentOS 6 与 CentOS 7 不同之处对比

|不同|CentOS 6|CentOS 7|
|----|--------|--------|
|内核|2.6|3.10|
|文件系统|ext4|xfs|
|防火墙|iptables|firewalld|
|默认数据库|MySQL|MariaDB|
|时间同步|ntpdate 域名|chronyc sources|
|修改时区|/etc/sysconfig/clock|timedatectl set-timezone Asia/Shanghai|
|修改语言|/etc/sysconfig/i18n|localetcl set-locale LANG=zh_CN.UTF-8|
|主机名|/etc/sysonfig/network|/etc/hostname(可用 hostnamectl 设置)|
|服务管理|service|systemctl|
|服务启动|chkconfig|systemctl|
|网络设置|ifconfig/setup|ip/nmtui|
|网络服务|network|network/NetworkManager(优先级高)|
