# shell 语法

## 条件判断

```shell
[ 判断语句 ] # 注意空格
```

### 判断文件类型

```shell
[ 选项 文件 ]
```

判断文件类型的前提,文件存在,判断符合时返回0

| 判断选项 | 描述             |
| -------- | ---------------- |
| -b       | 是否为块设备     |
| -c       | 是否为字符设备   |
| -d       | 是否为目录文件   |
| -e       | 是否存在         |
| -f       | 是否为普通文件   |
| -L       | 是否为符号链接   |
| -p       | 是否为管道文件   |
| -s       | 是否为空         |
| -S       | 是否为套接字文件 |

```shell
[ -b file ];echo $?
[ -e file ] && echo yes || echo no
```

### 判断文件权限

有对应权限时返回0

| 选项 | 描述             |
| ---- | ---------------- |
| -r   | 是否有读权限     |
| -w   | 是否有写权限     |
| -x   | 是否有执行权限   |
| -u   | 是否有 SUID 权限 |
| -g   | 是否有 SGID 权限 |
| -k   | 是否有 SBit 权限 |

### 文件比较

```shell
[ file1 选项 file2 ]
```

| 选项 | 描述                          |
| ---- | ----------------------------- |
| -nt  | 判断文件1是否比2新(修改时间)  |
| -ot  | 判断文件1是否比2旧(修改时间)  |
| -ef  | 两文件 Inode 是否相同(硬链接) |

```shell
[ file1 -ef file2 ];echo $?
```

### 整数比较

```shell
[ A 选项 B ]
```

| 选项 | 描述           |
| ---- | -------------- |
| -eq  | A是否等于B     |
| -ne  | A是否不等于B   |
| -gt  | A是否大于B     |
| -lt  | A是否小于B     |
| -ge  | A是否大于等于B |
| -le  | A是否小于等于B |

### 字符串判断

| 选项               | 描述                     |
| ------------------ | ------------------------ |
| -z strings         | 字符串是否为空           |
| -n strings         | 字符串是否非空           |
| string1 == string2 | 字符串1是否等于字符串2   |
| string1 != string2 | 字符串1是否不等于字符串2 |

### 多重判断

| 选项               | 描述                            |
| ------------------ | ------------------------------- |
| 条件1 -a 条件2     | 与,条件1和条件2同时成立,返回0   |
| 条件1 -o 条件2     | 或,条件1和条件2有一个成立,返回0 |
| ! 条件(之间有空格) | 非,条件取反                     |

```shell
[ -f file -a -w file];echo $?
```

## 流程控制

### if 条件判断

使用 if 进行条件判断,如果符合条件,则执行 then 语句,然后结束 if 语句;如不符合则跳过 then 语句,顺序向后执行,到 fi 语句时结束 if 语句

```shell
# 形式1
if [ 条件 ];then
	commands
fi
# 形式2
if [ 条件 ]
then
	commands
fi
# 双分支
if [ 条件 ]
then
	commands
else
	commands
fi
# 多分枝
if [ 条件 ]
then
	commands
elif
then
	commands
...
fi
```

if 语句可以进行嵌套使用

