# 资源管理

## 资源查看

```bash
w # 查看当前登录服务器的用户（静态显示）
第一行：当前时间；持续运行时间；登录用户数量；平均负载：1分钟,5分钟,15分钟
第二行：用户名；登录 终端（本地登录：tty；远程登录：pts/）；来源（IP）；登录时间；用户闲置时间；所有进程占用cpu时间；当前进程占用cpu时间；用户正在进行的操作

who # 查询登录用户
who am i # 查看自己的登录信息
whoami # 查看自己的登录用户

last # 列出所有登录过系统的相关信息
lastlog # 显示所有账户最后一次登录的时间
lastb # 查看错误登录的信息
# 三个命令对应的文件,只能通过以上三个命令打开,查看内容
# 而不能用文件内容查看命令（cat,more,less,head,tail）,文件内是二进制
```

## 挂载

常见的存储设备：

* /dev/sda* 硬盘分区
* /dev/cdrom 光盘（旧）
* /dev/sr* 光盘（新）

```bash
mount # 查询系统中已挂载的设备,也用来挂载设备
    -t # 指定挂载的文件系统类型（ext3,ext4,iso9660等）
    -o # 指定挂载的额外选项（特殊属性：读写权限,同步异步等）
# 格式
mount [-t 文件系统类型] [-o 特殊选项] 设备文件名 挂载点
# 挂载设备
# U盘或移动硬盘都会被识别为/dev/sd*
# 挂载点一定要是空的目录

umount # 卸载
# 卸载时,不能在挂载目录内（设备正忙）
# 卸载时既可以指定为挂载点,也可以指定为设备
```

### 特殊属性

1. rw/ro

    ```bash
    mount -t FS -o rw 设备 挂载点 # 将分区挂载为可读写
    mount -t FS -o ro 设备 挂载点 # 降分区挂载为只读
    -o remount # 重新挂载（针对已挂载设备）
    mount -t FS -o remount,rw 设备或挂载点 # 将分区重新挂载为只读
    mount -t FS -o remount,ro 设备或挂载点 # 将分区重新挂载为只读
    df -h # 查看分区和挂载点关系的命令,查看分区使用情况
        -h # 以合适的单位显示分区挂载信息
    fdisk -l # 查看所有可识别磁盘类存储设备（硬盘,移动硬盘,U盘）

2. exec/noexec

    exec 指的是能在当前分区内能执行可执行文件

    noexec 指的是即使文件有x权限,也不能执行

    在指定的分区下保存的文件无法执行

### 挂载NTFS设备的方法

重新编译内核

加载NTFS模块

使用第三方插件加载NTFS

#### 实验：利用NTFS-3g插件实现Linux挂载NTFS文件系统的U盘

1. 将U盘连接到Windows宿主机,然后通过VMware切换到Linux中

2. 使用fdisk -l命令确认U盘的设备名称

3. 安装ntfs-3g插件

4. 创建挂载点

5. 挂载

    ```bash
    mount -t ntfs-3g /dev/sd?? /mnt/usb
    ```
